@using UKMCAB.Web.UI.Areas.Search.Controllers;
@using UKMCAB.Web.UI.Extensions
@using UKMCAB.Web.UI.Models.ViewModels.Admin.ServiceManagement;
@using UKMCAB.Web.UI.Models.ViewModels.Search
@using Microsoft.AspNetCore.Identity
@using UKMCAB.Core.Security;
@using System.Security;
@model InternalLandingPageViewModel;

<div id="service-management-page" class="govuk-grid-row">

    <div class="govuk-grid-column-full">
        <h1 class="govuk-heading-l">Manage the service</h1>
    </div>

    <div id="notifications" class="govuk-grid-column-one-third">
        <div>
            <table class="govuk-table">                
                <a asp-route="@NotificationController.Routes.NotificationsHome">
                    <h2 class="govuk-heading-m">Notifications</h2>
                </a>
                <tbody class="govuk-table__body">
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">Unassigned</th>
                        <td class="govuk-table__cell">123</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">Assigned</th>
                        <td class="govuk-table__cell">123</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">Assigned to me</th>
                        <td class="govuk-table__cell">123</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="search-for-a-cab" class="govuk-grid-column-one-half">
        <div id="service-management-col-width-65-percent">

        
        <form id="search-results-form" asp-route="@SearchController.Routes.Search" method="get" novalidate>
            <div id="search-results" class="govuk-grid-row">

                <div id="search-keyword-container">
                    <div id="search-filter-keywords">
                        <fieldset aria-describe="search the conformity assessment body databaase using keywords or search terms">
                            <a asp-route="@SearchController.Routes.Search">
                                <h2 class="govuk-heading-m">
                                    Search for a CAB
                                    <label id="keywords-hidden-label" class="govuk-label govuk-label--m" asp-for="Keywords">
                                        Search for a CAB
                                    </label>
                                </h2>
                            </a>
                            <div id="search-filter-keywords-input-container">
                                <input type="text" asp-for="Keywords" class="govuk-input search-box"/>
                                <button id="search-keyword-button" type="submit">Search</button>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
        </form>
        </div>

    </div>

    <div class="govuk-grid-column-one-third">
        <div id="manage-cabs">
            <table class="govuk-table">
                <a asp-route="@AdminController.Routes.CABManagement">
                    <h2 class="govuk-heading-m">Manage CABs</h2>
                </a>
                <tbody class="govuk-table__body">
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">
                            <a asp-route="@AdminController.Routes.CABManagement" asp-route-filter="draft">
                                Draft
                            </a>
                        </th>
                        <td class="govuk-table__cell">@Model.TotalDraftCABs</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">
                            <a asp-route="@AdminController.Routes.CABManagement">
                                Awaiting approval
                            </a>
                        </th>
                        <td class="govuk-table__cell">@Model.TotalCABsPendingApproval</td>
                    </tr>
                    <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header">
                            <a asp-route="@CABController.Routes.CreateNewCab">
                                Create a CAB
                            </a>
                        </th>
                        <td class="govuk-table__cell"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    @if (User.HasClaim(Claims.UserManagement))
    {
        <div id="manage-users" class="govuk-grid-column-one-half">
            <div id="service-management-col-width-65-percent">
                <table class="govuk-table">
                    <a asp-route="@UserAdminController.Routes.UserList">
                        <h2 class="govuk-heading-m">Manage users</h2>
                    </a>
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">
                                <a asp-route="@UserAdminController.Routes.UserAccountRequestsList">
                                    Account requests
                                </a>
                            </th>
                            <td class="govuk-table__cell">@Model.TotalAccountRequests</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    }    
</div>
