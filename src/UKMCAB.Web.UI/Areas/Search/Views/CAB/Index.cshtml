@model CABProfileViewModel
@{
    ViewData["nav"] = "search";
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <partial name="Partials/_ValidationSummary" model="ViewData.ModelState"/>
        <span class="govuk-caption-m govuk-!-margin-bottom-3">CAB profile</span>
        <h1 class="govuk-heading-l">@Model.Name</h1>
        <div class="cab-detail-date-meta">
            <span class="govuk-caption-m govuk-!-display-inline-block govuk-!-margin-right-5">Published: @(Model.PublishedDate.HasValue ? Model.PublishedDate.Value.ToString("d MMM yyyy") : string.Empty)</span>
            <span class="govuk-caption-m govuk-!-display-inline-block">Last updated: @(Model.LastModifiedDate.HasValue ? Model.LastModifiedDate.Value.ToString("d MMM yyyy") : string.Empty)</span>
        </div>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

        <div class="govuk-tabs cab-tabs" data-module="govuk-tabs">
            <ul class="govuk-tabs__list">
                <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
                    <a class="govuk-tabs__tab" href="#details">
                        Details
                    </a>
                </li>
                <li class="govuk-tabs__list-item last">
                    <a class="govuk-tabs__tab" href="#product-schedules">
                        Product schedules
                    </a>
                </li>
            </ul>

            <div class="govuk-tabs__panel cabs__panel" id="details">
                <div class="cab-detail-section">
                    <h2 class="govuk-heading-l">About</h2>
                    <dl class="govuk-summary-list">
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                CAB name
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @Model.Name
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                UKAS reference number
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @Html.Conditional(!string.IsNullOrWhiteSpace(Model.UKASReferenceNumber), Model.UKASReferenceNumber, @Constants.NotProvided)
                            </dd>
                        </div>
                    </dl>
                </div>
                <div class="cab-detail-section">
                <h2 class="govuk-heading-l">Contact details</h2>
                    <dl class="govuk-summary-list">
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Address
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @if (!string.IsNullOrWhiteSpace(Model.Address))
                                {
                                    <text>@Html.Raw(Model.Address)</text>
                                }
                                else
                                {
                                    <text>@Constants.NotProvided</text>
                                }
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Website
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @if (!string.IsNullOrWhiteSpace(Model.Website))
                                {
                                    <a class="govuk-link" href="@Html.SanitiseURL(Model.Website)">@Model.Website</a>
                                }
                                else
                                {
                                    <text>@Constants.NotProvided</text>
                                }
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Email
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @if (!string.IsNullOrWhiteSpace(Model.Email))
                                {
                                    <a class="govuk-link" href="mailto: @Model.Email">@Model.Email</a>
                                }
                                else
                                {
                                    @Constants.NotProvided
                                }
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Phone
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @Html.Conditional(!string.IsNullOrWhiteSpace(Model.Phone), Model.Phone, @Constants.NotProvided)
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Registered office location
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @Html.Conditional(!string.IsNullOrWhiteSpace(Model.RegisteredOfficeLocation), Model.RegisteredOfficeLocation, @Constants.NotProvided)
                            </dd>
                        </div>
                    </dl>
                </div>
                <div class="cab-detail-section">
                <h2 class="govuk-heading-l">Body details</h2>
                    <dl class="govuk-summary-list">
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Registered test location
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @if (!Model.RegisteredTestLocations.Any())
                                {
                                    <text>@Constants.NotProvided</text>
                                }
                                else
                                {
                                    foreach (var testLocation in Model.RegisteredTestLocations)
                                    {
                                        <span class="cab-detail-list-item">@testLocation</span>
                                    }
                                }
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Body number
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @Html.Conditional(!string.IsNullOrWhiteSpace(Model.BodyNumber), Model.BodyNumber, @Constants.NotProvided)
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Body type
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @if (!Model.BodyTypes.Any())
                                {
                                    <text>@Constants.NotProvided</text>
                                }
                                else
                                {
                                    @foreach (var bodyType in Model.BodyTypes)
                                    {
                                        <span class="cab-detail-list-item">@bodyType</span>
                                    }
                                }
                            </dd>
                        </div>
                        <div class="govuk-summary-list__row">
                            <dt class="govuk-summary-list__key">
                                Legislative area
                            </dt>
                            <dd class="govuk-summary-list__value">
                                @if (!Model.LegislativeAreas.Any())
                                {
                                    <text>@Constants.NotProvided</text>
                                }
                                else
                                {
                                    @foreach (var legislativeArea in Model.LegislativeAreas)
                                    {
                                        <span class="cab-detail-list-item">@legislativeArea</span>
                                    }
                                }
                            </dd>
                        </div>
                    </dl>
                </div>
            </div>
            <div class="govuk-tabs__panel cabs__panel govuk-tabs__panel--hidden" id="product-schedules">
                <div class="cab-detail-section">
                    <h2 class="govuk-heading-l">Product schedules</h2>
                    @if (!Model.ProductSchedules.Any())
                    {
                        <p class="govuk-body">There are no product schedules.</p>
                    }
                    else
                    {
                        <ul class="cab-profile-file-list">
                            @foreach (var file in Model.ProductSchedules)
                            {
                                <li class="cab-profile-file-list-item">
                                    <a class="govuk-link" asp-area="search" asp-controller="CAB" asp-action="Download" asp-route-id="@file.BlobName" asp-route-file="@file.FileName">@file.FileName</a>
                                </li>
                            }
                        </ul>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
